<div class="client-payment-container">
  <!-- Header Section -->
  <div class="payment-header">
    <h2>ğŸ’³ {{ 'clientPayment.header.title' | translate }}</h2>
    <p>{{ 'clientPayment.header.subtitle' | translate }}</p>
  </div>

  <!-- Alerts -->
  <div class="alerts-section">
    <div *ngIf="errorMessage" class="alert alert-danger" role="alert">
      <strong>{{ 'clientPayment.alerts.errorPrefix' | translate }}</strong> {{ errorMessage }}
    </div>
    <div *ngIf="successMessage" class="alert alert-success" role="alert">
      <strong>{{ 'clientPayment.alerts.successPrefix' | translate }}</strong> {{ successMessage }}
    </div>
  </div>

  <!-- Payment Form -->
  <div class="payment-form-container">
    <form [formGroup]="paymentForm" (ngSubmit)="onSubmit()" class="payment-form">
      <!-- Amount Section -->
      <div class="form-section">
        <h3>ğŸ’° {{ 'clientPayment.sections.amount.title' | translate }}</h3>
        <div class="form-group">
          <label for="amount" class="form-label">
            <span class="label-icon">ğŸ’µ</span>
            {{ 'clientPayment.fields.amount.label' | translate }}
          </label>
          <div class="input-container">
            <input
              id="amount"
              type="number"
              class="form-input"
              formControlName="amount"
              [placeholder]="'clientPayment.fields.amount.placeholder' | translate"
              min="1"
              max="100000"
              step="0.01"
            />
            <div class="input-border"></div>
          </div>
          <div *ngIf="paymentForm.get('amount')?.invalid && paymentForm.get('amount')?.touched" class="error-message">
            {{ getErrorMessage('amount') }}
          </div>
        </div>
      </div>

      <!-- Currency Section -->
      <div class="form-section">
        <h3>ğŸŒ {{ 'clientPayment.sections.currency.title' | translate }}</h3>
        <div class="form-group">
          <label for="currency" class="form-label">
            <span class="label-icon">ğŸ¦</span>
            {{ 'clientPayment.fields.currency.label' | translate }}
          </label>
          <div class="input-container">
            <select id="currency" class="form-input" formControlName="currency">
              <option value="MAD">{{ 'clientPayment.fields.currency.options.MAD' | translate }}</option>
              <option value="EUR">{{ 'clientPayment.fields.currency.options.EUR' | translate }}</option>
              <option value="USD">{{ 'clientPayment.fields.currency.options.USD' | translate }}</option>
            </select>
            <div class="input-border"></div>
          </div>
        </div>
      </div>

      <!-- Payment Method Section -->
      <div class="form-section">
        <h3>ğŸ’³ {{ 'clientPayment.sections.method.title' | translate }}</h3>
        <div class="payment-methods-list">
          <label
            class="payment-method-card"
            [class.selected]="selectedPaymentMethod === 'bank_transfer'"
            (click)="onPaymentMethodChange('bank_transfer')"
          >
            <div class="payment-method-icon">ğŸ¦</div>
            <div class="payment-method-info">
              <div class="payment-method-name">{{ 'clientPayment.methods.bankTransfer' | translate }}</div>
              <div class="payment-method-description">{{ 'clientPayment.methods.bankTransferDesc' | translate }}</div>
            </div>
            <div class="payment-method-radio">
              <input type="radio" formControlName="paymentMethod" value="bank_transfer" />
            </div>
          </label>

          <label
            class="payment-method-card"
            [class.selected]="selectedPaymentMethod === 'paypal'"
            (click)="onPaymentMethodChange('paypal')"
          >
            <div class="payment-method-icon">ğŸ…¿ï¸</div>
            <div class="payment-method-info">
              <div class="payment-method-name">{{ 'clientPayment.methods.paypal' | translate }}</div>
              <div class="payment-method-description">{{ 'clientPayment.methods.paypalDesc' | translate }}</div>
            </div>
            <div class="payment-method-radio">
              <input type="radio" formControlName="paymentMethod" value="paypal" />
            </div>
          </label>
        </div>

        <div *ngIf="selectedPaymentMethod === 'bank_transfer'" class="method-details">
          <div class="method-details-header">
            <div class="method-icon">ğŸ¦</div>
            <div>
              <h4>{{ 'clientPayment.bankDetails.title' | translate }}</h4>
              <p>{{ 'clientPayment.bankDetails.description' | translate }}</p>
            </div>
          </div>
          <div class="bank-details">
            <div class="bank-detail">
              <span class="label">Banque</span>
              <span class="value">{{ 'clientPayment.bankDetails.bankName' | translate }}</span>
            </div>
            <div class="bank-detail">
              <span class="label">{{ 'clientPayment.bankDetails.accountNameLabel' | translate }}</span>
              <span class="value">{{ 'clientPayment.bankDetails.accountName' | translate }}</span>
            </div>
            <div class="bank-detail">
              <span class="label">IBAN</span>
              <span class="value">{{ 'clientPayment.bankDetails.iban' | translate }}</span>
            </div>
            <div class="bank-detail">
              <span class="label">BIC / SWIFT</span>
              <span class="value">{{ 'clientPayment.bankDetails.bic' | translate }}</span>
            </div>
            <div class="bank-detail">
              <span class="label">{{ 'clientPayment.bankDetails.referenceLabel' | translate }}</span>
              <span class="value">{{ 'clientPayment.bankDetails.referenceValue' | translate }}</span>
            </div>
          </div>
          <div class="method-note">{{ 'clientPayment.bankDetails.note' | translate }}</div>
        </div>

        <div *ngIf="selectedPaymentMethod === 'paypal'" class="method-details paypal-details">
          <div class="method-details-header">
            <div class="method-icon">ğŸ’ </div>
            <div>
              <h4>{{ 'clientPayment.paypal.title' | translate }}</h4>
              <p>{{ 'clientPayment.paypal.description' | translate }}</p>
            </div>
          </div>
          <ul class="method-bullets">
            <li>{{ 'clientPayment.paypal.steps.instant' | translate }}</li>
            <li>{{ 'clientPayment.paypal.steps.secure' | translate }}</li>
            <li>{{ 'clientPayment.paypal.steps.confirmation' | translate }}</li>
          </ul>
          <div class="method-note">{{ 'clientPayment.paypal.note' | translate }}</div>
        </div>
      </div>

      <!-- Description Section -->
      <div class="form-section">
        <h3>ğŸ“ {{ 'clientPayment.sections.description.title' | translate }}</h3>
        <div class="form-group">
          <label for="description" class="form-label">
            <span class="label-icon">ğŸ“‹</span>
            {{ 'clientPayment.fields.description.label' | translate }}
          </label>
          <div class="input-container">
            <textarea
              id="description"
              class="form-input"
              formControlName="description"
              [placeholder]="'clientPayment.fields.description.placeholder' | translate"
              rows="3"
            ></textarea>
            <div class="input-border"></div>
          </div>
          <div *ngIf="paymentForm.get('description')?.invalid && paymentForm.get('description')?.touched" class="error-message">
            {{ getErrorMessage('description') }}
          </div>
        </div>
      </div>

      <!-- Date Section -->
      <div class="form-section">
        <h3>ğŸ“… {{ 'clientPayment.sections.date.title' | translate }}</h3>
        <div class="form-group">
          <label for="date" class="form-label">
            <span class="label-icon">ğŸ“†</span>
            {{ 'clientPayment.fields.date.label' | translate }}
          </label>
          <div class="input-container">
            <input id="date" type="date" class="form-input" formControlName="date" />
            <div class="input-border"></div>
          </div>
        </div>
      </div>

      <!-- Security Notice -->
      <div class="security-notice">
        <div class="security-icon">ğŸ”’</div>
        <div class="security-content">
          <h4>{{ 'clientPayment.sections.security.title' | translate }}</h4>
          <p>{{ 'clientPayment.sections.security.message' | translate }}</p>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="form-actions">
        <button type="button" class="btn btn-cancel" (click)="onCancel()" [disabled]="isLoading">
          <span class="btn-icon">âœ•</span>
          {{ 'clientPayment.actions.cancel' | translate }}
        </button>
        <button type="submit" class="btn btn-submit" [disabled]="paymentForm.invalid || isLoading">
          <span class="btn-icon" *ngIf="!isLoading">ğŸ’³</span>
          <span class="btn-icon loading" *ngIf="isLoading">â³</span>
          {{
            isLoading
              ? ('clientPayment.actions.processing' | translate)
              : selectedPaymentMethod === 'paypal'
                ? ('clientPayment.actions.submitPaypal' | translate)
                : ('clientPayment.actions.submitBankTransfer' | translate)
          }}
        </button>
      </div>
    </form>
  </div>

  <!-- Payment Info -->
  <div class="payment-info">
    <div class="info-card">
      <div class="info-icon">â„¹ï¸</div>
      <div class="info-content">
        <h4>{{ 'clientPayment.info.title' | translate }}</h4>
        <ul>
          <li>{{ 'clientPayment.info.items.realTime' | translate }}</li>
          <li>{{ 'clientPayment.info.items.confirmation' | translate }}</li>
          <li>{{ 'clientPayment.info.items.invoice' | translate }}</li>
          <li>{{ 'clientPayment.info.items.support' | translate }}</li>
        </ul>
      </div>
    </div>
  </div>
</div>
