<div class="payment-result-container">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="loading-spinner"></div>
    <h3>VÃ©rification du statut de paiement...</h3>
    <p>Veuillez patienter pendant que nous vÃ©rifions votre transaction.</p>
  </div>

  <!-- Success State -->
  <div *ngIf="!isLoading && paymentStatus === 'success'" class="result-state success">
    <div class="result-icon">âœ…</div>
    <h2>Paiement RÃ©ussi !</h2>
    <p class="result-message">Votre paiement a Ã©tÃ© traitÃ© avec succÃ¨s.</p>

    <!-- Payment Details -->
    <div *ngIf="paymentDetails" class="payment-details">
      <div class="detail-card">
        <h3>DÃ©tails de la Transaction</h3>
        <div class="detail-grid">
          <div class="detail-item">
            <span class="detail-label">ID Transaction:</span>
            <span class="detail-value">{{ paymentDetails.cmiTransactionId || 'N/A' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Montant:</span>
            <span class="detail-value">{{ paymentDetails.amount }} {{ paymentDetails.currency }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Date:</span>
            <span class="detail-value">{{ paymentDetails.date | date: 'dd/MM/yyyy HH:mm' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Statut:</span>
            <span class="detail-value status-success">ComplÃ©tÃ©</span>
          </div>
          <div *ngIf="paymentDetails.cmiApprovalCode" class="detail-item">
            <span class="detail-label">Code d'approbation:</span>
            <span class="detail-value">{{ paymentDetails.cmiApprovalCode }}</span>
          </div>
          <div *ngIf="paymentDetails.description" class="detail-item">
            <span class="detail-label">Description:</span>
            <span class="detail-value">{{ paymentDetails.description }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Success Actions -->
    <div class="result-actions">
      <button class="btn btn-primary" (click)="onDownloadInvoice()">
        <span class="btn-icon">ğŸ“„</span>
        TÃ©lÃ©charger la Facture
      </button>
      <button class="btn btn-secondary" (click)="onGoToDashboard()">
        <span class="btn-icon">ğŸ </span>
        Retour au Dashboard
      </button>
    </div>

    <!-- Success Message -->
    <div class="success-notice">
      <div class="notice-icon">ğŸ“§</div>
      <div class="notice-content">
        <h4>Confirmation par Email</h4>
        <p>Une confirmation de paiement vous a Ã©tÃ© envoyÃ©e par email. VÃ©rifiez votre boÃ®te de rÃ©ception.</p>
      </div>
    </div>
  </div>

  <!-- Failed State -->
  <div *ngIf="!isLoading && paymentStatus === 'failed'" class="result-state failed">
    <div class="result-icon">âŒ</div>
    <h2>Paiement Ã‰chouÃ©</h2>
    <p class="result-message">Votre paiement n'a pas pu Ãªtre traitÃ©.</p>

    <!-- Error Details -->
    <div *ngIf="errorMessage" class="error-details">
      <div class="error-card">
        <h3>DÃ©tails de l'Erreur</h3>
        <p class="error-message">{{ errorMessage }}</p>
      </div>
    </div>

    <!-- Payment Details (if available) -->
    <div *ngIf="paymentDetails" class="payment-details">
      <div class="detail-card">
        <h3>DÃ©tails de la Transaction</h3>
        <div class="detail-grid">
          <div class="detail-item">
            <span class="detail-label">ID Commande:</span>
            <span class="detail-value">{{ paymentDetails.cmiOrderId || 'N/A' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Montant:</span>
            <span class="detail-value">{{ paymentDetails.amount }} {{ paymentDetails.currency }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Date:</span>
            <span class="detail-value">{{ paymentDetails.date | date: 'dd/MM/yyyy HH:mm' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Statut:</span>
            <span class="detail-value status-failed">Ã‰chouÃ©</span>
          </div>
          <div *ngIf="paymentDetails.cmiResponseMessage" class="detail-item">
            <span class="detail-label">Message d'erreur:</span>
            <span class="detail-value">{{ paymentDetails.cmiResponseMessage }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Failed Actions -->
    <div class="result-actions">
      <button class="btn btn-primary" (click)="onTryAgain()">
        <span class="btn-icon">ğŸ”„</span>
        RÃ©essayer
      </button>
      <button class="btn btn-secondary" (click)="onGoToDashboard()">
        <span class="btn-icon">ğŸ </span>
        Retour au Dashboard
      </button>
      <button class="btn btn-danger" (click)="onContactSupport()">
        <span class="btn-icon">ğŸ“</span>
        Contacter le Support
      </button>
    </div>

    <!-- Help Notice -->
    <div class="help-notice">
      <div class="notice-icon">ğŸ’¡</div>
      <div class="notice-content">
        <h4>Besoin d'Aide ?</h4>
        <p>Si vous rencontrez des problÃ¨mes, n'hÃ©sitez pas Ã  contacter notre Ã©quipe de support. Nous sommes lÃ  pour vous aider.</p>
      </div>
    </div>
  </div>

  <!-- Pending State -->
  <div *ngIf="!isLoading && paymentStatus === 'pending'" class="result-state pending">
    <div class="result-icon">â³</div>
    <h2>Paiement en Cours</h2>
    <p class="result-message">Votre paiement est en cours de traitement.</p>

    <!-- Payment Details -->
    <div *ngIf="paymentDetails" class="payment-details">
      <div class="detail-card">
        <h3>DÃ©tails de la Transaction</h3>
        <div class="detail-grid">
          <div class="detail-item">
            <span class="detail-label">ID Commande:</span>
            <span class="detail-value">{{ paymentDetails.cmiOrderId || 'N/A' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Montant:</span>
            <span class="detail-value">{{ paymentDetails.amount }} {{ paymentDetails.currency }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Date:</span>
            <span class="detail-value">{{ paymentDetails.date | date: 'dd/MM/yyyy HH:mm' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Statut:</span>
            <span class="detail-value status-pending">En Attente</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Pending Actions -->
    <div class="result-actions">
      <button class="btn btn-primary" (click)="checkPaymentStatus()">
        <span class="btn-icon">ğŸ”„</span>
        VÃ©rifier le Statut
      </button>
      <button class="btn btn-secondary" (click)="onGoToDashboard()">
        <span class="btn-icon">ğŸ </span>
        Retour au Dashboard
      </button>
    </div>

    <!-- Pending Notice -->
    <div class="pending-notice">
      <div class="notice-icon">â°</div>
      <div class="notice-content">
        <h4>Traitement en Cours</h4>
        <p>
          Le traitement de votre paiement peut prendre quelques minutes. Vous recevrez une notification dÃ¨s que le statut sera mis Ã  jour.
        </p>
      </div>
    </div>
  </div>
</div>
