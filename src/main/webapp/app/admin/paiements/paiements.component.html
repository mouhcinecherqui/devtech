<div class="admin-paiements-container">
  <!-- Header Section -->
  <div class="admin-paiements-header">
    <div class="header-content">
      <div class="header-text">
        <h2>{{ 'paiementsAdmin.title' | translate }}</h2>
        <p>{{ 'paiementsAdmin.subtitle' | translate }}</p>
      </div>
      <jhi-refresh-button [loading]="isLoading" (refresh)="loadPaiements()"></jhi-refresh-button>
    </div>
  </div>

  <!-- Stats Section -->
  <div class="admin-paiements-stats">
    <div class="stats-card">
      <div class="stats-icon">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
          <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </div>
      <div class="stats-content">
        <h3>{{ paiements.length }}</h3>
        <p>{{ 'paiementsAdmin.total' | translate }}</p>
      </div>
    </div>
    <div class="stats-card">
      <div class="stats-icon">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
          <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          <path
            d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
            stroke="currentColor"
            stroke-width="2"
          />
        </svg>
      </div>
      <div class="stats-content">
        <h3>{{ paiementsCompletes }}</h3>
        <p>{{ 'paiementsAdmin.completed' | translate }}</p>
      </div>
    </div>
    <div class="stats-card">
      <div class="stats-icon">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
          <polyline points="12,6 12,12 16,14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </div>
      <div class="stats-content">
        <h3>{{ paiementsEnAttente }}</h3>
        <p>{{ 'paiementsAdmin.pending' | translate }}</p>
      </div>
    </div>
    <div class="stats-card">
      <div class="stats-icon">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
          <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
      </div>
      <div class="stats-content">
        <h3>{{ paiementsEchoues }}</h3>
        <p>{{ 'paiementsAdmin.failed' | translate }}</p>
      </div>
    </div>
  </div>

  <!-- Search + Action Row -->
  <div class="search-action-row">
    <div class="search-section">
      <div class="search-container">
        <input type="text" class="search-input" placeholder="{{ 'paiementsAdmin.search' | translate }}" [(ngModel)]="search" />
        <div class="search-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" />
            <path d="M21 21L16.65 16.65" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </div>
      </div>
    </div>
    <div class="admin-paiements-actions">
      <button class="btn btn-primary add-paiement-btn" (click)="ajouterPaiement()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path d="M12 5V19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        {{ 'paiementsAdmin.add' | translate }}
      </button>
    </div>
  </div>

  <!-- Paiements Table -->
  <div class="paiements-table-container">
    <table class="paiements-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>{{ 'paiementsAdmin.user' | translate }}</th>
          <th>{{ 'paiementsAdmin.amount' | translate }}</th>
          <th>{{ 'paiementsAdmin.date' | translate }}</th>
          <th>{{ 'paiementsAdmin.status' | translate }}</th>
          <th>{{ 'paiementsAdmin.actions' | translate }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let paiement of paiements | filterPaiements: search" class="paiement-row">
          <td class="paiement-id">{{ paiement.id }}</td>
          <td class="paiement-user">{{ paiement.user }}</td>
          <td class="paiement-amount">{{ paiement.amount | currency: 'EUR' }}</td>
          <td class="paiement-date">{{ paiement.date }}</td>
          <td class="paiement-status">
            <span
              class="status-badge"
              [ngClass]="{
                'badge-success': paiement.status === 'Completed' || paiement.status === 'Complété',
                'badge-pending': paiement.status === 'Pending' || paiement.status === 'En attente',
                'badge-failed': paiement.status === 'Failed' || paiement.status === 'Échoué',
              }"
            >
              {{ paiement.status }}
            </span>
          </td>
          <td class="paiement-actions">
            <button class="btn btn-accent" (click)="exporterFacturePDF(paiement)" title="Exporter facture PDF">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path
                  d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.0391C19.7893 20.7893 20 20.5304 20 20V8L14 2Z"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M16 13H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M16 17H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M10 9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              {{ 'paiementsAdmin.invoice' | translate }}
            </button>
          </td>
        </tr>
        <tr *ngIf="!paiements.length" class="empty-state">
          <td colspan="6">
            <div class="empty-state-content">
              <div class="empty-icon">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                  <path
                    d="M12 2L2 7L12 12L22 7L12 2Z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </div>
              <h3>Aucun paiement trouvé</h3>
              <p>Aucun paiement disponible pour le moment</p>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
